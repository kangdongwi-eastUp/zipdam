# Zipdam (집담) 제품 요구사항 정의서 (PRD)

## 1. 프로젝트 개요
**제품명:** Zipdam (집담)
**목적:** 전체 인테리어 패키지가 아닌, 입주민 동의서, 보양, 행위 허가 등 특정하고 세분화된 서비스를 제공하여 인테리어 과정을 간소화하는 온라인 플랫폼입니다.
**타겟 사용자:**
-   **개인 집주인 (셀프 인테리어):** 인테리어를 직접 관리하며 특정 부분의 도움이 필요한 개인.
-   **인테리어 업체:** 입주민 동의서 확보나 폐기물 수거 등 특정 업무를 외주 주려는 업체.

## 2. 핵심 사용자 흐름 (User Flow)
1.  **랜딩 페이지 (`index.php`):**
    -   사용자는 홍보 이미지가 담긴 슬라이더를 봅니다.
    -   그리드 메뉴(체크박스)에서 하나 이상의 서비스를 선택합니다.
    -   선택 시 하단에 떠있는 "신청하기" 버튼에 선택된 항목 수가 실시간으로 업데이트됩니다.
    -   "신청하기" 클릭 시 선택된 항목을 URL 파라미터로 전달하며 신청서 페이지로 이동합니다.

2.  **신청서 작성 (`sub/request.php`):**
    -   **동적 렌더링:** 선택한 서비스에 관련된 입력 필드만 동적으로 표시됩니다 (예: 동의서 선택 시 "공사 기간", 폐기물 수거 선택 시 "폐기물 양").
    -   **공통 정보:** 주소 (다음 우편번호 API 연동), 이름, 연락처, 신청인 유형 (개인 vs 업체).
    -   **서비스별 로직:**
        -   *입주민 동의서/행위 허가:* 공사 기간, 소음 예상일, 현장 담당자 정보 등.
        -   *보양:* 보양 유형 (올보양, 준보양 등) 선택.
        -   *방화문/유리:* 구체적인 품목 (방화문, 방화유리 등) 선택.
        -   *폐기물:* 예상 폐기물 양 (1톤 트럭 기준) 선택.
        -   *방충망 시공:* 망 소재 및 옵션 선택.
    -   **결제 방법:** 결제 방식 선택 (계좌 이체 vs 간편 결제).
    -   **동의:** 개인정보 수집 및 이용 동의 (필수).

3.  **제출 및 처리 (`sub/request.process.php`):**
    -   **유효성 검사:** 필수 항목 및 동의 여부를 확인합니다.
    -   **데이터베이스:** 모든 신청 데이터를 `request` 테이블에 저장합니다.
    -   **알림:** Solapi SDK를 사용하여 사용자에게 신청 완료 알림톡(카카오톡)을 발송합니다.
    -   **리다이렉트:** 완료 페이지로 이동합니다.

## 3. 기능 요구사항

### 3.1. 사용자 인터페이스 (Frontend)
-   **서비스 선택:**
    -   여러 서비스를 중복 선택할 수 있어야 합니다.
    -   "단일 선택"과 "다중 선택" 로직을 처리해야 합니다 (예: 일부 항목은 상호 배타적일 수 있음).
    -   선택된 항목 수를 실시간으로 업데이트해야 합니다.
-   **신청서:**
    -   선택된 항목에 따라 폼이 미리 채워지거나 구성되어야 합니다.
    -   필수 필드(날짜, 주소, 연락처)의 유효성을 검사해야 합니다.
    -   정확한 주소 입력을 위해 다음 우편번호 API를 연동해야 합니다.
    -   (분석 결과) 현재 파일 업로드 기능은 폼에 구현되어 있지 않으나, `uploads` 디렉토리는 존재합니다.

### 3.2. 백엔드 처리 (Backend)
-   **데이터 저장:**
    -   모든 폼 입력값을 MySQL에 저장합니다.
    -   선택적 필드(nullable)를 적절히 처리합니다.
    -   등록 일시(`reg_date`)를 기록합니다.
-   **알림:**
    -   신청 성공 시 카카오톡 알림을 발송합니다.
    -   알림 서비스 실패 시에도 사용자의 신청은 정상적으로 처리되도록 예외 처리를 합니다.

### 3.3. 관리자 기능 (`adm/`)
-   **신청 관리:**
    -   신청 목록 조회 (`request.list.php`).
    -   신청 상세 내용 조회 (`request.detail.php`).
    -   신청 삭제/복구.
-   **콘텐츠 관리:**
    -   게시판 관리 (뉴스/공지사항 등).
-   **인증:**
    -   관리자 로그인/로그아웃.

## 4. 데이터 사전 (추론)

| 필드명 | 설명 | 타입 |
| :--- | :--- | :--- |
| `items` | 선택된 서비스 코드 (콤마로 구분) | String |
| `name` | 신청인 이름 | String |
| `phone` | 신청인 연락처 | String |
| `address` | 현장 주소 | String |
| `detailAddress` | 상세 주소 | String |
| `type` | 신청인 유형 (직영/업체) | String |
| `company` | 업체명 (해당 시) | String |
| `date_begin` | 시작일 | Date/String |
| `date_end` | 종료일 | Date/String |
| `construction` | 공사 내용 (도배, 바닥 등) | String |
| `curing` | 보양 유형 | String (Array/JSON) |
| `payment_method` | 결제 방식 | String |
| `reg_date` | 등록 일시 | Datetime |

## 5. 기술 아키텍처
-   **언어:** PHP 7.x/8.x
-   **데이터베이스:** MySQL / MariaDB
-   **프론트엔드 라이브러리:** jQuery, bxSlider
-   **외부 API:**
    -   **Solapi (Nurigo):** SMS/카카오톡 알림톡 발송용.
    -   **Daum Postcode:** 주소 검색용.

## 6. 향후 개선 사항 / 누락된 기능 (분석)
-   **파일 업로드:** `uploads` 디렉토리는 존재하지만, 현재 신청서 폼에는 도면이나 현장 사진을 업로드하는 기능이 구현되어 있지 않습니다.
-   **사용자 계정:** 현재는 비회원 신청 모델입니다. 정기적으로 이용하는 고객(업체)을 위한 로그인/이력 관리 기능이 없습니다.
-   **결제 연동:** 결제 방식은 선택만 가능하며, 실제 PG(결제 게이트웨이) 연동은 신청 흐름에 구현되어 있지 않습니다.
